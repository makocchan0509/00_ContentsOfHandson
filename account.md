#### アカウント・リソース管理方針
AWS,Azure,GCPを利用する上でアカウントとリソースの管理方針を決めておく。  

---

#### アカウント管理基本方針  
クラウドベンダそれぞれのアカウントを管理するのは管理する側も使う側も面倒なので、クラウドベンダが提供するSSO(シングルサインオン)等を利用することでアカウント管理負担を低減する。

---

#### アカウント管理場所とSSOの活用
 - AzureとAWSについてはAzureAD（Active Directory）にて担当者毎のアカウントを管理をする。AzureADのSSO機能を利用してAWSへログインできるようにする。アカウントについてはAzureAD上で作成するので各自での作成は不要。
 - GCPについてもAzureADからSSOは可能だが、G Suiteという企業向け統合サービスとの連携が必要（ユーザ数課金＆ドメイン取得が必要）なため連携しない。  
   Googleアカウントを各自用意してもらうこととする。

>>>

[参考サイト:AWS SAML](https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_providers_enable-console-saml.html)

---

#### リソース管理単位とアカウント権限について

---

#### AWS
- AWSは同一アカウント内でリソースを分割管理する機能がないのでグループ間でリソース分割は行わない。
- リソース作成時にはタグを設定することができるため、タグにグループを識別する情報を入れる事とする。
- アカウントに付与する権限はPowerUser（+ PassRoleポリシー）として、IAM以外のサービスを好きに構築できるようにする。

---

#### Azure  
- グループ毎にサブスクリプション（請求単位を分割するもの）を分ける事とする。更にサブスクリプション内にリソースグループを作成してその配下にスコープ毎にリソースを作成してもらう事とする。
- リソースグループの作成単位は任意とする。
   ```
   サブスクリプション     <-- グループ毎に1つ
    | - リソースグループ  <-- サブスクリプションに対して複数作成可能。任意の単位で作成する事。
         |- リソース     <-- 各種リソース。 VMやDBなど.
   ```

>>>

- 用意するサブスクリプション
```
 a-group-subscription <-- Aグループ
 b-group-subscription <-- Bグループ
 c-group-subscription <-- Cグループ
 d-group-subscription <-- Dグループ
 e-group-subscription <-- Eグループ
 f-group-subscription <-- Fグループ
 common-subscription <-- グループ間共通で編集可
```

---

- アカウント権限についてはグループ毎にAzure AD上のグループを作成してグループ単位に権限を付与する。  
- 上述したグループに1つ割り当てるサブスクリプションに対して共同作成者（権限以外好きにできるやつ）権限を付与する。  
とはいえ、他グループの作成状況等を参照したいこともあるかと思うので、その他のサブスクリプションに対して閲覧者（参照）権限を付与することとする。
- グループ共通のサブスクリプションを一つ用意するので共通資産があればこちらで作成ください。

---

#### GCP  
- グループ毎にプロジェクト（請求やリソース管理単位）を分けることとする。  
- アカウント権限についてはグループ毎にGoogleGroupを作成してグループ毎に割り当てたプロジェクトに編集者権限を付与する事とする。  
- 他のグループのプロジェクトは参照できるようにするため、参照者権限を他プロジェクトに付与する。
- azureと同様にグループ共通のプロジェクトを一つ用意するので共通資産があればこちらで作成ください。

>>>

- プロジェクト構成
```
A-group <-- Aグループ
B-group <-- Bグループ
C-group <-- Cグループ
D-group <-- Dグループ
E-group <-- Eグループ
F-group <-- Fグループ
common-proj <-- グループ間共通で編集可
```

---

#### 登録時の特権アカウントについて
  - 何でもできてしまうユーザになるため、必要以上に利用しません。